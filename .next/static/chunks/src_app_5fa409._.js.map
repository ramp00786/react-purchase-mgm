{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://D%3A/Coding/www/tulsi_work/lern-react/laravel-nextjs-starter/my-frontend/src/app/utils/axios.js"],"sourcesContent":["import axios from 'axios';\r\n\r\nconst axiosInstance = axios.create({\r\n    baseURL: 'http://localhost:8000/api',\r\n    withCredentials: true,\r\n});\r\n\r\nexport default axiosInstance;\r\n"],"names":[],"mappings":";;;AAAA;;AAEA,MAAM,gBAAgB,wIAAA,CAAA,UAAK,CAAC,MAAM,CAAC;IAC/B,SAAS;IACT,iBAAiB;AACrB;uCAEe"}},
    {"offset": {"line": 20, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 26, "column": 0}, "map": {"version":3,"sources":["file://D%3A/Coding/www/tulsi_work/lern-react/laravel-nextjs-starter/my-frontend/src/app/purchase/page.js"],"sourcesContent":["\"use client\"\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport \"bootstrap/dist/css/bootstrap.min.css\";\r\nimport axios from \"../utils/axios\";\r\nimport { useRouter } from \"next/navigation\"; // Next.js 15 navigation hook\r\nimport Menu from \"..Menu/component/Menu\"\r\n\r\nexport default function Purchase() {\r\n  const router = useRouter(); // Next.js navigation\r\n  const [products, setProducts] = useState([]);\r\n  const [suppliers, setSuppliers] = useState([]);\r\n  const [propurchase, setPropurchase] = useState({\r\n    supplier_id: '',\r\n    products: [],\r\n    total_price: 0,\r\n  });\r\n\r\n  useEffect(() => {\r\n    axios.get('/products').then((response) => {\r\n      setProducts(response.data);\r\n    });\r\n    axios.get('/suppliers').then((response) => {\r\n      setSuppliers(response.data);\r\n    });\r\n  }, []);\r\n\r\n\r\n  const addProduct = (product) => {\r\n    const selectedProduct = products.find((p) => p.id === parseInt(product.target.value));\r\n    setPropurchase({\r\n      ...propurchase,\r\n      products: [\r\n        ...propurchase.products,\r\n        {\r\n          ...selectedProduct,\r\n          quantity: 1, // Adding the quantity property\r\n        },\r\n      ],\r\n      total_price: parseFloat(propurchase.total_price) + parseFloat(selectedProduct.price),\r\n    });\r\n  };\r\n\r\n  const removeProduct = (productId) => {\r\n    const updatedProducts = propurchase.products.filter((p) => p.id !== productId);\r\n    // console.log(updatedProducts);\r\n    setPropurchase({\r\n      ...propurchase,\r\n      products: updatedProducts,\r\n      total_price: parseFloat(propurchase.total_price) - parseFloat(propurchase.products.find((p) => p.id === productId).price),\r\n    });\r\n  };\r\n\r\n\r\n  const updatedProductQuantity = (e, productId) => {\r\n    const updatedProducts = propurchase.products.map((product) =>\r\n      product.id === productId\r\n        ? { ...product, quantity: parseInt(e.target.value) }\r\n        : product\r\n    );\r\n\r\n    // Recalculate the total price\r\n    const updatedTotalPrice = updatedProducts.reduce(\r\n      (total, product) => total + parseFloat(product.price) * product.quantity,\r\n      0\r\n    );\r\n\r\n    setPropurchase({\r\n      ...propurchase,\r\n      products: updatedProducts,\r\n      total_price: updatedTotalPrice,\r\n    });\r\n  };\r\n\r\n  // Handle form submission\r\n  const handleSubmit = async () => {\r\n    // Validate form inputs and submit purchase request\r\n    if (!propurchase.supplier_id) {\r\n        alert(\"Please select a supplier\");\r\n        return;\r\n    }\r\n\r\n    if (propurchase.products.length === 0) {\r\n      alert(\"Please add products.\");\r\n      return;\r\n  }\r\n\r\n    try {\r\n        const response = await axios.post(\"/submit-purchase\", propurchase);\r\n        console.log(\"Purchase submitted successfully:\", response.data);\r\n        alert(\"Order submitted successfully!\");\r\n        // Redirect to the invoice page with the purchase ID\r\n        router.push(`/invoice/${response.data.data.id}`);\r\n    } catch (error) {\r\n        console.error(\"Error submitting order:\", error);\r\n        alert(\"Failed to submit order. Please try again.\");\r\n    }\r\n};\r\n\r\n  // console.log(propurchase.total_price);\r\n  return (\r\n    <div className=\"container mt-4\">\r\n      <div className=\"row\">\r\n        <div className=\"col-md-12 \">\r\n          <h3>Create Order</h3>\r\n          <Menu></Menu>\r\n          <hr />\r\n        </div>\r\n        <div className=\"col-md-6 mb-4\">\r\n          <div className=\"form-group\">\r\n            <label>Supplier</label>\r\n            <select className=\"form-control\" onChange={(e) => setPropurchase({ ...propurchase, supplier_id: e.target.value })}>\r\n              <option value=\"\">Select Supplier</option>\r\n              {suppliers.map((supplier) => (\r\n                <option key={supplier.id} value={supplier.id}>{supplier.name}</option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n        </div>\r\n        <div className=\"col-md-6 mb-4\">\r\n          <div className=\"form-group\">\r\n            <label>Products</label>\r\n            <select className=\"form-control\" onChange={addProduct}>\r\n              <option value=\"\">Select Product</option>\r\n              {products.map((product) => (\r\n                <option key={product.id} value={product.id}>{product.name}</option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n        </div>\r\n              <hr />\r\n        <div className=\"col-md-12 my-4\">\r\n          <table className=\"table table-bordered\">\r\n            <thead>\r\n              <tr className=\"thead\">\r\n                <th>Code</th>\r\n                <th>Product Name</th>\r\n                <th>Quantity</th>\r\n                <th>Cost Price</th>\r\n                <th>GST (18%)</th>\r\n                <th>Total</th>\r\n                <th>Action</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {propurchase.products.map((product) => (\r\n                <tr key={product.id}>\r\n\r\n                  <td>{product.id}</td>\r\n                  <td>{product.name}</td>\r\n                  <td>\r\n                    <input\r\n                      type=\"number\"\r\n                      className=\"form-control\"\r\n                      defaultValue={product.quantity}\r\n                      min={1}\r\n                      onChange={(e) => updatedProductQuantity(e, product.id)}\r\n                    />\r\n\r\n\r\n                  </td>\r\n                  <td>{product.price}</td>\r\n                  <td>{parseFloat(((parseFloat(product.price) * 18) / 100) * parseInt(product.quantity)).toFixed(2)}</td>\r\n\r\n                  <td>{parseFloat((parseFloat(product.price) * parseInt(product.quantity)) + ((parseFloat(product.price) * 18) / 100) * parseInt(product.quantity)).toFixed(2)}</td>\r\n\r\n\r\n                  <td>\r\n                    <button className=\"btn btn-danger\" onClick={() => removeProduct(product.id)}>Remove</button>\r\n                  </td>\r\n\r\n\r\n\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n\r\n          <div className=\"row d-flex justify-content-end\">\r\n            <div className=\"col-md-4 \">\r\n              <table className=\"table table-bordered\">\r\n                <tbody>\r\n                  <tr>\r\n                    <td>Sub Total</td>\r\n                    <td>\r\n                      {parseFloat(propurchase.products.reduce(function (total, product) {\r\n                        return total + parseFloat(product.price) * parseInt(product.quantity);\r\n                      }, 0)).toFixed(2)}\r\n\r\n\r\n                    </td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td>GST (18%)</td>\r\n                    <td>\r\n                      {propurchase.products.reduce((total, item) => {\r\n                        return total + ((parseFloat(item.price) * 18) / 100) * parseInt(item.quantity);\r\n                      }, 0).toFixed(2)}\r\n                    </td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td>Grand Total</td>\r\n                    <td>\r\n                      {parseFloat(\r\n                        parseFloat(propurchase.products.reduce(function (total, product) {\r\n                          return total + parseFloat(product.price) * parseInt(product.quantity);\r\n                        }, 0)) +\r\n                          propurchase.products.reduce((total, item) => {\r\n                            return total + ((parseFloat(item.price) * 18) / 100) * parseInt(item.quantity);\r\n                          }, 0)\r\n                      ).toFixed(2)}\r\n                    </td>\r\n                  </tr>\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n          </div>\r\n                      \r\n          <div className=\"form-group d-flex justify-content-end\">\r\n            <button className=\"btn btn-primary\" onClick={handleSubmit}>Submit Order</button>\r\n          </div>\r\n        </div>\r\n\r\n      </div>\r\n    </div>\r\n\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 571, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}